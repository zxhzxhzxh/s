<!doctype html>
<html>
  <head>
		<meta charset="utf-8">
		<title></title>
		<style>
		  *{
				padding:0;margin:0;
			}
     img{
			 width:400px;
			 height:600px;
		 }
		 #more{
			 width:150px;
			 height:150px;
			 background:url(more2.jpg) no-repeat;
			 background-size:cover;
			 cursor:pointer;
		 }
		</style>
		<script src="ajax.js"></script>
	</head>
	<body >
	   <img src="ajax1/0.jpg" />
		 <img src="ajax1/1.jpg" />
		 <img src="ajax1/2.jpg" />
		 <img src="ajax1/3.jpg" />
		 <div id="more"></div>
	</body>
	<script>
    //加载更多
		var more=document.getElementById("more");
		var i=1;
		more.onclick=function(){
		  ajax("img"+(i++)+".json",fn1,fn2);
			//成功的回调函数
			function fn1(str){
			  // console.log(str);
				var arr=JSON.parse(str).src;
				for(var i=0;i<arr.length;i++){
					var _img= document.createElement("img");
					_img.src="ajax1/"+arr[i];
					// document.body.appendChild(_img);
					document.body.insertBefore(_img,more);
				}
			}
			//失败的回调函数
			function fn2(str){
			  if(str==404){
					alert("注意健康");
				}
			};
		}
	</script>
</html>
